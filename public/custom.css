/* ====================================================
   Cisco Foundation-Sec 8B — Custom Avatar / UI Styles
   Maintainer: Willis Chen <misweyu2007@gmail.com>
   Sci-Fi / Cyberpunk HUD Theme v3.0
   顏色全面改由 theme.json CSS 變數控制
   ==================================================== */

/* ===== 科幻動態背景：格線 + 掃描線 + 霓虹光 ===== */

/* 動態格線背景 */
@keyframes gridScroll {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 60px;
  }
}

/* 掃描線動畫 */
@keyframes scanlines {
  0% {
    transform: translateY(-100%);
    opacity: 0.07;
  }

  100% {
    transform: translateY(100vh);
    opacity: 0.03;
  }
}

/* 霓虹脈衝光暈 */
@keyframes neonPulse {

  0%,
  100% {
    box-shadow:
      0 0 6px 1px hsl(var(--ring) / 0.15),
      0 0 18px 2px hsl(var(--ring) / 0.06);
  }

  50% {
    box-shadow:
      0 0 12px 3px hsl(var(--ring) / 0.30),
      0 0 32px 6px hsl(var(--ring) / 0.12);
  }
}

/* 邊框流光 */
@keyframes borderGlow {

  0%,
  100% {
    border-color: hsl(var(--ring) / 0.25);
  }

  50% {
    border-color: hsl(var(--ring) / 0.60);
  }
}

/* 文字打字機閃爍效果 */
@keyframes cursorBlink {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0;
  }
}

/* ===== 主體背景：動態格線 + 深色基底 ===== */
body,
#root,
.cl-root {
  background-color: hsl(var(--background)) !important;
  background-image:
    linear-gradient(hsl(var(--ring) / 0.04) 1px, transparent 1px),
    linear-gradient(90deg, hsl(var(--ring) / 0.04) 1px, transparent 1px),
    radial-gradient(ellipse at 20% 50%, hsl(var(--primary) / 0.12) 0%, transparent 60%),
    radial-gradient(ellipse at 80% 20%, hsl(var(--ring) / 0.08) 0%, transparent 50%) !important;
  background-size: 60px 60px, 60px 60px, 100% 100%, 100% 100% !important;
  animation: gridScroll 8s linear infinite !important;
}

/* ===== 掃描線覆蓋層 ===== */
body::before {
  content: '';
  position: fixed;
  top: -100vh;
  left: 0;
  width: 100%;
  height: 3px;
  background: linear-gradient(to bottom,
      transparent 0%,
      hsl(var(--ring) / 0.06) 50%,
      transparent 100%);
  z-index: 9999;
  pointer-events: none;
  animation: scanlines 6s linear infinite;
}

/* ===== 全域光暈角落裝飾 ===== */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(circle at 0% 0%, hsl(var(--primary) / 0.08) 0%, transparent 35%),
    radial-gradient(circle at 100% 100%, hsl(var(--ring) / 0.06) 0%, transparent 35%);
  pointer-events: none;
  z-index: 0;
}

/* ===== 對話訊息容器：科幻毛玻璃卡片 ===== */
[class*="message"],
[class*="Message"],
[class*="step"],
[class*="Step"] {
  background: linear-gradient(135deg,
      hsl(var(--card) / 0.75) 0%,
      hsl(var(--card) / 0.65) 100%) !important;
  backdrop-filter: blur(12px) saturate(1.4) !important;
  -webkit-backdrop-filter: blur(12px) saturate(1.4) !important;
  border: 1px solid hsl(var(--border) / 0.60) !important;
  border-radius: var(--radius) !important;
  animation: borderGlow 3s ease-in-out infinite !important;
  box-shadow:
    0 0 8px hsl(var(--ring) / 0.08),
    0 4px 24px hsl(var(--background) / 0.45),
    inset 0 1px 0 hsl(var(--ring) / 0.08) !important;
  transition: box-shadow 0.3s ease, border-color 0.3s ease !important;
  align-items: flex-start !important;
}

[class*="message"]:hover,
[class*="Message"]:hover {
  box-shadow:
    0 0 18px hsl(var(--ring) / 0.20),
    0 4px 32px hsl(var(--background) / 0.55),
    inset 0 1px 0 hsl(var(--ring) / 0.15) !important;
  border-color: hsl(var(--ring) / 0.40) !important;
}

/* ===== 使用者訊息泡泡：略偏主色科幻色 ===== */
[class*="userMessage"],
[class*="user-message"],
[class*="UserMessage"] {
  background: linear-gradient(135deg,
      hsl(var(--accent) / 0.50) 0%,
      hsl(var(--accent) / 0.40) 100%) !important;
  border-color: hsl(var(--primary) / 0.30) !important;
}

/* ===== 主聊天區域背景 ===== */
main,
[class*="chat-container"],
[class*="chatContainer"],
[class*="messages"],
[class*="Messages"] {
  background: transparent !important;
}

/* ===== 輸入框：霓虹科幻風格 ===== */
[class*="input"],
[class*="Input"],
textarea,
input[type="text"] {
  background: hsl(var(--background) / 0.85) !important;
  border: 1px solid hsl(var(--input) / 0.80) !important;
  border-radius: var(--radius) !important;
  color: hsl(var(--foreground)) !important;
  box-shadow:
    0 0 8px hsl(var(--ring) / 0.06),
    inset 0 1px 0 hsl(var(--ring) / 0.05) !important;
  transition: border-color 0.25s ease, box-shadow 0.25s ease !important;
}

[class*="input"]:focus,
[class*="Input"]:focus,
textarea:focus {
  border-color: hsl(var(--ring) / 0.60) !important;
  box-shadow:
    0 0 16px hsl(var(--ring) / 0.20),
    inset 0 1px 0 hsl(var(--ring) / 0.10) !important;
  outline: none !important;
}

/* ===== 底部輸入列容器 ===== */
[class*="inputContainer"],
[class*="input-container"],
[class*="composer"],
[class*="Composer"] {
  background: linear-gradient(180deg,
      hsl(var(--background) / 0.0) 0%,
      hsl(var(--background) / 0.92) 30%) !important;
  backdrop-filter: blur(16px) !important;
  -webkit-backdrop-filter: blur(16px) !important;
  border-top: 1px solid hsl(var(--border) / 0.40) !important;
}

/* ===== 側邊欄：深邃科幻風 ===== */
[class*="sidebar"],
[class*="Sidebar"],
nav {
  background: linear-gradient(180deg,
      hsl(var(--sidebar-background) / 0.96) 0%,
      hsl(var(--sidebar-background) / 0.96) 100%) !important;
  border-right: 1px solid hsl(var(--sidebar-border) / 0.60) !important;
  backdrop-filter: blur(8px) !important;
}

/* ===== Header ===== */
header {
  background: hsl(var(--background) / 0.92) !important;
  border-bottom: 1px solid hsl(var(--border) / 0.40) !important;
  backdrop-filter: blur(12px) !important;
  box-shadow: 0 2px 24px hsl(var(--background) / 0.60) !important;
}

/* ===== 程式碼區塊：Hacker Terminal 風格 ===== */
pre,
code {
  background: hsl(var(--muted) / 0.60) !important;
  border: 1px solid hsl(var(--border) / 0.80) !important;
  border-radius: calc(var(--radius) - 2px) !important;
  color: hsl(var(--accent-foreground)) !important;
  font-family: var(--font-mono) !important;
  box-shadow: 0 0 10px hsl(var(--ring) / 0.06) !important;
}

/* ===== 按鈕：科幻霓虹 CTA ===== */
button[class*="primary"],
[class*="sendButton"],
[class*="send-button"] {
  background: linear-gradient(135deg,
      hsl(var(--primary) / 0.70) 0%,
      hsl(var(--primary)) 100%) !important;
  border: 1px solid hsl(var(--ring) / 0.40) !important;
  color: hsl(var(--primary-foreground)) !important;
  box-shadow: 0 0 12px hsl(var(--ring) / 0.18) !important;
  transition: all 0.2s ease !important;
}

button[class*="primary"]:hover,
[class*="sendButton"]:hover {
  background: linear-gradient(135deg,
      hsl(var(--primary)) 0%,
      hsl(var(--ring) / 1.0) 100%) !important;
  box-shadow: 0 0 24px hsl(var(--ring) / 0.35) !important;
  transform: translateY(-1px) !important;
}

/* ===== 文字顏色：交給 theme.json 控制 ===== */
p,
span,
li {
  color: hsl(var(--foreground)) !important;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  color: hsl(var(--primary)) !important;
  text-shadow: 0 0 12px hsl(var(--primary) / 0.35) !important;
}

/* ===== 引用塊 ===== */
blockquote {
  border-left: 3px solid hsl(var(--ring) / 0.40) !important;
  background: hsl(var(--ring) / 0.04) !important;
  border-radius: 0 var(--radius) var(--radius) 0 !important;
}

/* ===== 捲軸科幻美化 ===== */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--background) / 0.60);
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg,
      hsl(var(--primary) / 0.50) 0%,
      hsl(var(--primary) / 0.70) 100%);
  border-radius: 3px;
  box-shadow: 0 0 6px hsl(var(--ring) / 0.25);
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg,
      hsl(var(--primary) / 0.70) 0%,
      hsl(var(--primary)) 100%);
}

/* ===== Avatar 尺寸優化 ===== */
.cl-avatar,
[class*="avatar"],
[class*="Avatar"] {
  width: 36px !important;
  height: 36px !important;
  min-width: 36px !important;
  min-height: 36px !important;
  border-radius: 50% !important;
  object-fit: cover !important;
  overflow: hidden !important;
  box-shadow: 0 0 10px hsl(var(--ring) / 0.30) !important;
  border: 1px solid hsl(var(--ring) / 0.30) !important;
}

.cl-avatar img,
[class*="avatar"] img,
[class*="Avatar"] img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  object-position: center !important;
  border-radius: 50% !important;
}

.step-icon,
[class*="stepIcon"],
[class*="step-icon"] {
  width: 32px !important;
  height: 32px !important;
  min-width: 32px !important;
  border-radius: 50% !important;
  object-fit: cover !important;
  overflow: hidden !important;
}

header img,
[class*="logo"],
[class*="Logo"] {
  max-height: 40px !important;
  width: auto !important;
  object-fit: contain !important;
}